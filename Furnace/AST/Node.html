<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Furnace::AST::Node
  
    &mdash; Documentation by YARD 0.8.3
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (N)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Furnace.html" title="Furnace (module)">Furnace</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../AST.html" title="Furnace::AST (module)">AST</a></span></span>
     &raquo; 
    <span class="title">Node</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Furnace::AST::Node
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Furnace::AST::Node</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/furnace/ast/node.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Node is an immutable class, instances of which represent abstract
syntax tree nodes. It combines semantic information (i.e. anything
that affects the algorithmic properties of a program) with
meta-information (line numbers or compiler intermediates).</p>

<h1 id="notes-on-inheritance">Notes on inheritance</h1>

<p>The distinction between semantics and metadata is important. Complete
semantic information should be contained within just the <span class='object_link'><a href="#type-instance_method" title="Furnace::AST::Node#type (method)">#type</a></span> and
<span class='object_link'><a href="#children-instance_method" title="Furnace::AST::Node#children (method)">#children</a></span> of a Node instance; in other words, if an AST was to be
stripped of all meta-information, it should remain a valid AST which
could be successfully processed to yield a result with the same
algorithmic properties.</p>

<p>Thus, Node should never be inherited in order to define methods which
affect or return semantic information, such as getters for <code>class_name</code>,
<code>superclass</code> and <code>body</code> in the case of a hypothetical <code>ClassNode</code>. The
correct solution is to use a generic Node with a <span class='object_link'><a href="#type-instance_method" title="Furnace::AST::Node#type (method)">#type</a></span> of <code>:class</code>
and three children. See also <span class='object_link'><a href="Processor.html" title="Furnace::AST::Processor (class)">Processor</a></span> for tips on working with such
ASTs.</p>

<p>On the other hand, Node can and should be inherited to define
application-specific metadata (see also <span class='object_link'><a href="#initialize-instance_method" title="Furnace::AST::Node#initialize (method)">#initialize</a></span>) or customize the
printing format. It is expected that an application would have one or two
such classes and use them across the entire codebase.</p>

<p>The rationale for this pattern is extensibility and maintainability.
Unlike static ones, dynamic languages do not require the presence of a
predefined, rigid structure, nor does it improve dispatch efficiency,
and while such a structure can certainly be defined, it does not add
any value but incurs a maintaining cost.
For example, extending the AST even with a transformation-local
temporary node type requires making globally visible changes to
the codebase.</p>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#children-instance_method" title="#children (instance method)">- (Array) <strong>children</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the children of this node.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#type-instance_method" title="#type (instance method)">- (Symbol) <strong>type</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the type of this node.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3D%3D-instance_method" title="#== (instance method)">- (Boolean) <strong>==</strong>(other) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Compares <code>self</code> to <code>other</code>, possibly converting with <code>to_ast</code>.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#assign_properties-instance_method" title="#assign_properties (instance method)">- (nil) <strong>assign_properties</strong>(properties) </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#dup-instance_method" title="#dup (instance method)">- (Object) <strong>dup</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#fancy_type-instance_method" title="#fancy_type (instance method)">- (String) <strong>fancy_type</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns <code>@type</code> with all underscores replaced by dashes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Node) <strong>initialize</strong>(type, children = [], properties = {}) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Constructs a new instance of Node.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_a-instance_method" title="#to_a (instance method)">- (Array) <strong>to_a</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns <span class='object_link'><a href="#children-instance_method" title="Furnace::AST::Node#children (method)">#children</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_ast-instance_method" title="#to_ast (instance method)">- (AST::Node) <strong>to_ast</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Self.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">- (String) <strong>to_s</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Converts <code>self</code> to a concise s-expression, omitting any children.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_sexp-instance_method" title="#to_sexp (instance method)">- (String) <strong>to_sexp</strong>(indent = 0) </a>
    

    
      (also: #inspect)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Converts <code>self</code> to a pretty-printed s-expression.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#updated-instance_method" title="#updated (instance method)">- (AST::Node) <strong>updated</strong>(type = nil, children = nil, properties = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns a new instance of Node where non-nil arguments replace the
corresponding fields of <code>self</code>.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Furnace::AST::Node (class)">Node</a></span></tt>) <strong>initialize</strong>(type, children = [], properties = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Constructs a new instance of Node.</p>

<p>The arguments <code>type</code> and <code>children</code> are converted with <code>to_sym</code> and
<code>to_a</code> respectively. Additionally, the result of converting <code>children</code>
is frozen. While mutating the arguments is generally considered harmful,
the most common case is to pass an array literal to the constructor. If
your code does not expect the argument to be frozen, use <code>#dup</code>.</p>

<p>The <code>properties</code> hash is passed to <span class='object_link'><a href="#assign_properties-instance_method" title="Furnace::AST::Node#assign_properties (method)">#assign_properties</a></span>.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59
60
61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/furnace/ast/node.rb', line 57</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_type identifier id'>type</span><span class='comma token'>,</span> <span class='rubyid_children identifier id'>children</span><span class='assign token'>=</span><span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_properties identifier id'>properties</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='rubyid_@type ivar id'>@type</span><span class='comma token'>,</span> <span class='rubyid_@children ivar id'>@children</span> <span class='assign token'>=</span> <span class='rubyid_type identifier id'>type</span><span class='dot token'>.</span><span class='rubyid_to_sym identifier id'>to_sym</span><span class='comma token'>,</span> <span class='rubyid_children identifier id'>children</span><span class='dot token'>.</span><span class='rubyid_to_a identifier id'>to_a</span><span class='dot token'>.</span><span class='rubyid_freeze identifier id'>freeze</span>

  <span class='rubyid_assign_properties identifier id'>assign_properties</span><span class='lparen token'>(</span><span class='rubyid_properties identifier id'>properties</span><span class='rparen token'>)</span>

  <span class='rubyid_freeze identifier id'>freeze</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="children-instance_method">
  
    - (<tt>Array</tt>) <strong>children</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the children of this node.
The returned value is frozen.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/furnace/ast/node.rb', line 46</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_children identifier id'>children</span>
  <span class='rubyid_@children ivar id'>@children</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="type-instance_method">
  
    - (<tt>Symbol</tt>) <strong>type</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the type of this node.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/furnace/ast/node.rb', line 41</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_type identifier id'>type</span>
  <span class='rubyid_@type ivar id'>@type</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="==-instance_method">
  
    - (<tt>Boolean</tt>) <strong>==</strong>(other) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Compares <code>self</code> to <code>other</code>, possibly converting with <code>to_ast</code>. Only
<code>type</code> and <code>children</code> are compared; metadata is deliberately ignored.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


114
115
116
117
118
119
120
121
122
123
124</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/furnace/ast/node.rb', line 114</span>

<span class='rubyid_def def kw'>def</span> <span class='eq op'>==</span><span class='lparen token'>(</span><span class='rubyid_other identifier id'>other</span><span class='rparen token'>)</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_equal? fid id'>equal?</span><span class='lparen token'>(</span><span class='rubyid_other identifier id'>other</span><span class='rparen token'>)</span>
    <span class='rubyid_true true kw'>true</span>
  <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_other identifier id'>other</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span> <span class='symbol val'>:to_ast</span>
    <span class='rubyid_other identifier id'>other</span> <span class='assign token'>=</span> <span class='rubyid_other identifier id'>other</span><span class='dot token'>.</span><span class='rubyid_to_ast identifier id'>to_ast</span>
    <span class='rubyid_other identifier id'>other</span><span class='dot token'>.</span><span class='rubyid_type identifier id'>type</span> <span class='eq op'>==</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_type identifier id'>type</span> <span class='andop op'>&amp;&amp;</span>
      <span class='rubyid_other identifier id'>other</span><span class='dot token'>.</span><span class='rubyid_children identifier id'>children</span> <span class='eq op'>==</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_children identifier id'>children</span>
  <span class='rubyid_else else kw'>else</span>
    <span class='rubyid_false false kw'>false</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assign_properties-instance_method">
  
    - (<tt>nil</tt>) <strong>assign_properties</strong>(properties)  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74
75
76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/furnace/ast/node.rb', line 72</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_assign_properties identifier id'>assign_properties</span><span class='lparen token'>(</span><span class='rubyid_properties identifier id'>properties</span><span class='rparen token'>)</span>
  <span class='rubyid_properties identifier id'>properties</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='bitor op'>|</span>
    <span class='rubyid_instance_variable_set identifier id'>instance_variable_set</span> <span class='symbol val'>:&quot;@#{name}&quot;</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_nil nil kw'>nil</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dup-instance_method">
  
    - (<tt>Object</tt>) <strong>dup</strong>  <span class="extras">(protected)</span>
  

  

  
</h3>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fancy_type-instance_method">
  
    - (<tt>String</tt>) <strong>fancy_type</strong>  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns <code>@type</code> with all underscores replaced by dashes. This allows
to write symbol literals without quotes in Ruby sources and yet have
nicely looking s-expressions.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


197
198
199</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/furnace/ast/node.rb', line 197</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_fancy_type identifier id'>fancy_type</span>
  <span class='rubyid_@type ivar id'>@type</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='rubyid_gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='string val'>'_'</span><span class='comma token'>,</span> <span class='string val'>'-'</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_a-instance_method">
  
    - (<tt>Array</tt>) <strong>to_a</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns <span class='object_link'><a href="#children-instance_method" title="Furnace::AST::Node#children (method)">#children</a></span>. This is very useful in order to decompose nodes
concisely. For example:</p>

<pre class="code ruby18"><code>node = s(:gasgn, :$foo, s(:integer, 1))
s
var_name, value = *node
p var_name # =&gt; :$foo
p value    # =&gt; (integer 1)
</code></pre>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


143
144
145</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/furnace/ast/node.rb', line 143</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_to_a identifier id'>to_a</span>
  <span class='rubyid_children identifier id'>children</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_ast-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Furnace::AST::Node (class)">AST::Node</a></span></tt>) <strong>to_ast</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Self</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Furnace::AST::Node (class)">AST::Node</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>self</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


186
187
188</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/furnace/ast/node.rb', line 186</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_to_ast identifier id'>to_ast</span>
  <span class='rubyid_self self kw'>self</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_s-instance_method">
  
    - (<tt>String</tt>) <strong>to_s</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Converts <code>self</code> to a concise s-expression, omitting any children.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/furnace/ast/node.rb', line 129</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_to_s identifier id'>to_s</span>
  <span class='dstring node'>&quot;(#{fancy_type} ...)&quot;</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_sexp-instance_method">
  
    - (<tt>String</tt>) <strong>to_sexp</strong>(indent = 0) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='inspect-instance_method'>inspect</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Converts <code>self</code> to a pretty-printed s-expression.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>indent</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>0</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Base indentation level.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/furnace/ast/node.rb', line 151</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_to_sexp identifier id'>to_sexp</span><span class='lparen token'>(</span><span class='rubyid_indent identifier id'>indent</span><span class='assign token'>=</span><span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='rubyid_indented identifier id'>indented</span> <span class='assign token'>=</span> <span class='string val'>&quot;  &quot;</span> <span class='mult op'>*</span> <span class='rubyid_indent identifier id'>indent</span>
  <span class='rubyid_sexp identifier id'>sexp</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{indented}(#{fancy_type}&quot;</span>

  <span class='rubyid_first_node_child identifier id'>first_node_child</span> <span class='assign token'>=</span> <span class='rubyid_children identifier id'>children</span><span class='dot token'>.</span><span class='rubyid_index identifier id'>index</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_child identifier id'>child</span><span class='bitor op'>|</span>
    <span class='rubyid_child identifier id'>child</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Node constant id'>Node</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='rubyid_child identifier id'>child</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Array constant id'>Array</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span> <span class='orop op'>||</span> <span class='rubyid_children identifier id'>children</span><span class='dot token'>.</span><span class='rubyid_count identifier id'>count</span>

  <span class='rubyid_children identifier id'>children</span><span class='dot token'>.</span><span class='rubyid_each_with_index identifier id'>each_with_index</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_child identifier id'>child</span><span class='comma token'>,</span> <span class='rubyid_idx identifier id'>idx</span><span class='bitor op'>|</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_child identifier id'>child</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Node constant id'>Node</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_idx identifier id'>idx</span> <span class='geq op'>&gt;=</span> <span class='rubyid_first_node_child identifier id'>first_node_child</span>
      <span class='rubyid_sexp identifier id'>sexp</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;\n#{child.to_sexp(indent + 1)}&quot;</span>
    <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_child identifier id'>child</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>
      <span class='rubyid_sexp identifier id'>sexp</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot; {\n&quot;</span>
      <span class='rubyid_child identifier id'>child</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_key identifier id'>key</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='bitor op'>|</span>
        <span class='rubyid_if if kw'>if</span> <span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Node constant id'>Node</span><span class='rparen token'>)</span>
          <span class='rubyid_pretty_value identifier id'>pretty_value</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_to_sexp identifier id'>to_sexp</span><span class='lparen token'>(</span><span class='rubyid_indent identifier id'>indent</span> <span class='plus op'>+</span> <span class='integer val'>2</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_lstrip identifier id'>lstrip</span>
        <span class='rubyid_else else kw'>else</span>
          <span class='rubyid_pretty_value identifier id'>pretty_value</span> <span class='assign token'>=</span> <span class='rubyid_value identifier id'>value</span><span class='dot token'>.</span><span class='rubyid_inspect identifier id'>inspect</span>
        <span class='rubyid_end end kw'>end</span>

        <span class='rubyid_sexp identifier id'>sexp</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;#{indented}    #{key.inspect} =&gt; #{pretty_value}\n&quot;</span>
      <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_sexp identifier id'>sexp</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot;#{indented}  }&quot;</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_sexp identifier id'>sexp</span> <span class='lshft op'>&lt;&lt;</span> <span class='dstring node'>&quot; #{child.inspect}&quot;</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_sexp identifier id'>sexp</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;)&quot;</span>

  <span class='rubyid_sexp identifier id'>sexp</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="updated-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Furnace::AST::Node (class)">AST::Node</a></span></tt>) <strong>updated</strong>(type = nil, children = nil, properties = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a new instance of Node where non-nil arguments replace the
corresponding fields of <code>self</code>.</p>

<p>For example, <code>Node.new(:foo, [ 1, 2 ]).updated(:bar)</code> would yield
<code>(bar 1 2)</code>, and <code>Node.new(:foo, [ 1, 2 ]).updated(nil, [])</code> would
yield <code>(foo)</code>.</p>

<p>If the resulting node would be identical to <code>self</code>, does nothing.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>children</span>
      
      
        <span class='type'>(<tt>Array</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>properties</span>
      
      
        <span class='type'>(<tt>Hash</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Furnace::AST::Node (class)">AST::Node</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98
99
100
101
102
103
104
105
106
107
108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/furnace/ast/node.rb', line 96</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_updated identifier id'>updated</span><span class='lparen token'>(</span><span class='rubyid_type identifier id'>type</span><span class='assign token'>=</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_children identifier id'>children</span><span class='assign token'>=</span><span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_properties identifier id'>properties</span><span class='assign token'>=</span><span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='rubyid_new_type identifier id'>new_type</span>       <span class='assign token'>=</span> <span class='rubyid_type identifier id'>type</span>       <span class='orop op'>||</span> <span class='rubyid_@type ivar id'>@type</span>
  <span class='rubyid_new_children identifier id'>new_children</span>   <span class='assign token'>=</span> <span class='rubyid_children identifier id'>children</span>   <span class='orop op'>||</span> <span class='rubyid_@children ivar id'>@children</span>
  <span class='rubyid_new_properties identifier id'>new_properties</span> <span class='assign token'>=</span> <span class='rubyid_properties identifier id'>properties</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_@type ivar id'>@type</span> <span class='eq op'>==</span> <span class='rubyid_new_type identifier id'>new_type</span> <span class='andop op'>&amp;&amp;</span>
      <span class='rubyid_@children ivar id'>@children</span> <span class='eq op'>==</span> <span class='rubyid_new_children identifier id'>new_children</span> <span class='andop op'>&amp;&amp;</span>
      <span class='rubyid_properties identifier id'>properties</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_self self kw'>self</span>
  <span class='rubyid_else else kw'>else</span>
    <span class='rubyid_dup identifier id'>dup</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span> <span class='symbol val'>:initialize</span><span class='comma token'>,</span> <span class='rubyid_new_type identifier id'>new_type</span><span class='comma token'>,</span> <span class='rubyid_new_children identifier id'>new_children</span><span class='comma token'>,</span> <span class='rubyid_new_properties identifier id'>new_properties</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Thu Jan 10 20:50:39 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.3 (ruby-1.9.3).
</div>

  </body>
</html>